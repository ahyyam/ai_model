- [x] Install dependencies (`pnpm install` or `npm install`/`yarn install`).
- [x] Configure environment variables in a `.env` file (Firebase, Stripe, etc.).
- [x] Set up Firebase (Firestore, Auth, Storage) and add config to `.env`.
- [x] Set up Stripe (products/plans, secret key in `.env`).
- [x] Implemented Stripe API routes for checkout and customer portal.
- [x] Created comprehensive Stripe setup documentation.
- [x] Fixed Stripe portal session error handling and added proper error messages.
- [x] Created Stripe connection test endpoint.
- [x] Updated billing page to show real user data from Firebase and Stripe.
- [x] Created user management utilities for Firestore integration.
- [x] Full codebase cleanup - removed all legacy localStorage/sessionStorage authentication logic.
- [x] Implemented strict Firebase Auth state management across all components.
- [x] Enforced proper navigation flow: landing page for non-logged-in users only.
- [x] Removed unused/legacy code and files.
- [x] Fixed Stripe environment variable error by moving all Stripe operations to server-side API routes.
- [x] Created new API route for Stripe customer operations to prevent client-side Stripe imports.
- [x] Added subscription buttons to billing page for users without active subscriptions.
- [x] Added hover effects and subscription reminders in projects grid for non-subscribed users.
- [x] Fixed Firebase offline error by adding proper error handling and fallback user data.
- [x] Added subscription button to empty projects state for non-subscribed users.
- [x] Fixed checkout session error handling and added configuration validation.
- [x] Configure Stripe price IDs in environment variables (STRIPE_BASIC_PRICE_ID, STRIPE_PRO_PRICE_ID, STRIPE_ELITE_PRICE_ID, STRIPE_MINI_PRICE_ID, STRIPE_STANDARD_PRICE_ID, STRIPE_PLUS_PRICE_ID).
- [x] Fixed Stripe checkout session error handling for missing email field.
- [x] Improved error messages for missing Stripe configuration.
- [x] Fixed Stripe checkout session mode handling for subscription vs payment products.
- [x] Added comprehensive error logging and debugging for Stripe API calls.
- [x] Added validation to detect Product ID vs Price ID confusion in Stripe configuration.
- [x] Updated Stripe setup documentation to clarify Product ID vs Price ID difference.
- [x] Fixed hydration mismatch error by adding suppressHydrationWarning to body element.
- [x] Fixed sidebar skeleton component to use deterministic width instead of Math.random().
- [x] Improved onboarding flow responsiveness for mobile and all devices.
- [x] Enhanced progress indicator with mobile-friendly design and progress bar.
- [x] Optimized navigation buttons for mobile (stacked) and desktop (side-by-side).
- [x] Updated grid layouts to work better on tablets and mobile devices.
- [x] Improved aesthetic selection cards for better mobile experience.
- [x] Enhanced file uploader with touch-friendly interactions and responsive sizing.
- [x] Added proper spacing and padding for mobile devices throughout onboarding.
- [x] Changed website name from Modelix to Zarta throughout the codebase.
- [x] Implemented horizontal sliding testimonials carousel with dot navigation indicators.
- [x] Implemented horizontal sliding pricing carousel with dot navigation indicators.
- [x] Modified testimonials and pricing carousels to show all cards visible at once.
- [x] Fixed "Most Popular" badge positioning to ensure it's fully visible and not cut off.
- [x] Implemented fixed bottom navigation for onboarding flow with always-visible next/back buttons.
- [x] Changed aesthetic selection to responsive grid layout that adjusts based on screen size.
- [x] Removed back button from step 1 (aesthetic selection) since it's the first step.
- [x] Removed step counter text from the fixed bottom navigation bar.
- [x] Removed "Generate AI Photoshoot" button from final step, keeping only the bottom navigation button.
- [x] Removed "Get Started" button from mobile burger menu navigation.
- [x] Improved "Log In" button alignment and styling in mobile burger menu.
- [x] Fixed TypeScript syntax errors in login page by recreating the file.
- [x] Hidden dot navigation on testimonials and pricing carousels for desktop (lg screens) where all cards are visible.
- [x] Made pricing cards uniform in height with fixed minimum height and proper flex layout.
- [x] Fixed "Most Popular" badge positioning and visibility on pricing cards.
- [x] Improved "Most Popular" badge spacing with more top padding and better positioning.
- [x] Adjusted "Most Popular" badge to position at card outline while maintaining full visibility.
- [x] Reduced pricing card size by removing empty space and making all cards uniform based on Pro card content.
- [x] Modified pricing cards to create account first then navigate to Stripe billing instead of direct billing access.
- [x] Removed account deletion option from settings page for security.
- [x] Added styled feedback messages for password changes that match the website's design theme.
- [x] Added floating plus icon in bottom right corner for mobile devices on projects page that navigates to new project creation.
- [x] Optimized "Choose Your Plan" section in billing page for mobile with responsive card layout.
- [x] Added current password requirement back to the change password section for enhanced security.
- [x] Run the development server (`pnpm dev` or `npm run dev`/`yarn dev`).
- [x] Fixed TypeScript module resolution errors by reinstalling dependencies.
- [x] Fixed header component with improved navigation, smooth scrolling, and mobile menu.
- [x] Fixed slider/carousel functionality for testimonials, pricing, and before-after sections.
- [x] Fixed all landing page sliders: before-after toggle, testimonials carousel, and pricing carousel.
- [x] Implemented complete user flow: onboarding state storage, credit checking, image generation, and Firebase storage.
- [x] Optimized website performance: lazy loading, intersection observers, image optimization, and caching.
- [x] Enhanced prompt validation: handles empty strings, whitespace, and short inputs with smart defaults.
- [x] Comprehensive SEO optimization: metadata, structured data, sitemap, robots.txt, and semantic HTML.
- [x] Landing page SEO optimization: enhanced content, semantic HTML, structured data, and keyword-rich descriptions.
- [x] Modernized hero section: instant AI photoshoot messaging, modern design, enhanced SEO, and social proof.
- [x] Implemented consistent design system: brand colors, typography, spacing, and component patterns.
- [x] Fixed button border radius consistency: updated header and pricing buttons to use consistent styling.
- [x] Fixed font-sora CSS error: added font family configuration to Tailwind config.
- [x] Removed SEO content section from landing page as requested.
- [x] Improved hero section layout: changed from vertical stacking to horizontal spread for better screen utilization.
- [x] Integrated hero section with website design: removed isolated background effects and container wrappers for seamless blending.
- [x] Removed aesthetic selection step from onboarding flow: simplified AI generation process to 3 steps (upload garment, add reference, generate).
- [x] Added credit/token count display in navigation for logged-in users: shows available credits with coin icon in both desktop and mobile views.
- [x] Migrated hosting to Vercel: configured Vercel deployment with Firebase Auth, Firestore, and Storage.
- [x] Build for production (`pnpm build` or `npm run build`/`yarn build`).
- [x] Set up Firebase Functions deployment for complete Next.js app with API routes.
- [x] Fixed build errors: added missing getProjectById function, added critters dependency, fixed Next.js config.
- [x] Clean up repository: removed unnecessary node_modules and build files from functions directory
- [x] Updated .gitignore to properly exclude build artifacts and environment files
- [x] Created comprehensive environment setup documentation
- [x] Created .env.example template file
- [x] **ENHANCED ONBOARDING EXPERIENCE**: Improved onboarding flow for both PC and mobile with:
  - [x] Enhanced visual design with gradients and animations
  - [x] Better mobile responsiveness with auto-advance features
  - [x] Improved file uploader with visual feedback and mobile-specific tips
  - [x] Enhanced progress indicators with animated progress bars
  - [x] Better step navigation with smooth transitions
  - [x] Added visual guide modal with interactive help
  - [x] Enhanced error handling and user feedback
  - [x] Mobile-specific quick tips and guidance
  - [x] Improved loading states and generation progress
  - [x] Better visual hierarchy and spacing
- [x] **FIXED API ISSUES**: Resolved problems with OpenAI and Runway APIs:
  - [x] Confirmed OpenAI API is working correctly with gpt-4.1-mini model
  - [x] Fixed Runway API integration by using correct tasks.retrieve method
  - [x] Updated waitForRunwayGeneration function to properly poll task status
  - [x] Both APIs now return proper responses and handle task completion correctly
- [x] **SIMPLIFIED PROJECTS GRID**: Updated projects page layout:
  - [x] Outside card now shows only the final result image
  - [x] Removed prompt preview, input images, and project name from card
  - [x] Kept only status badge, date, and processing indicator
  - [x] All detailed information (garment, reference, prompt) moved to project details page
  - [x] Fixed project details page to fetch from Firebase and show final result image
- [x] **MOVED REVIEW ICONS TO HERO SECTION**: Repositioned review icons for better impact:
  - [x] Added review icons from `/public/icons/` to hero section next to "Trusted by 10,000+ brands"
  - [x] Removed review icons from testimonials section for cleaner design
  - [x] Updated Next.js config to use modern `remotePatterns` instead of deprecated `domains`
- [x] **REPOSITIONED DELETE FUNCTIONALITY**: Moved delete button from projects grid to project details page:
  - [x] Removed delete button from projects grid cards for cleaner design
  - [x] Added comprehensive delete functionality to project details page
  - [x] Delete function removes project document and all associated images from Firebase
  - [x] Added confirmation dialog with clear warning about permanent deletion
  - [x] Added toast notifications for success/error feedback
  - [x] Automatic redirect to projects page after successful deletion
- [x] **FIXED API AUTHENTICATION ISSUE**: Resolved 401 errors in API calls:
  - [x] Added missing `FIREBASE_STORAGE_BUCKET` environment variable for Firebase Admin
  - [x] Enhanced authentication checks in generate component with token refresh
  - [x] Added better error handling and debugging for API authentication
  - [x] Improved user experience with proper authentication flow
- [x] **FIXED API KEY FORMATTING**: Resolved environment variable issues:
  - [x] Fixed malformed `OPENAI_API_KEY` that had `\n` suffix causing invalid API key
  - [x] Added debugging logs to track API key loading in OpenAI and Runway clients
  - [x] Restarted development server to pick up corrected environment variables
- [x] **FIXED API AUTHENTICATION**: Resolved 401 errors in `/api/generate`:
  - [x] Added debugging logs to Firebase Admin SDK initialization
  - [x] Added debugging logs to token verification in generate API
  - [x] Added detailed token debugging (format, length, claims)
  - [x] Added error details logging for token verification failures
  - [x] Created test endpoint to verify environment variables and SDK initialization
  - [x] Confirmed Firebase Admin SDK and environment variables are working
  - [x] **IDENTIFIED ROOT CAUSE**: Firebase Admin SDK duplicate app initialization error
  - [x] **FIXED DUPLICATE APP ISSUE**: Updated Firebase Admin SDK to handle multiple initialization calls
  - [x] **RESOLVED AUTHENTICATION**: Fixed token verification by preventing duplicate app creation
- [x] **FIXED RUNWAY IMAGE EXTRACTION**: Resolved "Generation still processing" issue:
  - [x] Added comprehensive debugging to Runway response handling
  - [x] **IDENTIFIED ROOT CAUSE**: Runway API returns direct URL array, not assets/images structure
  - [x] **FIXED URL EXTRACTION**: Updated `waitForRunwayGeneration` to handle correct response format
  - [x] **RESOLVED IMAGE GENERATION**: Fixed image URL extraction to complete generation process
- [x] **ENHANCED RESULTS PAGE**: Added prompt display and improved user experience:
  - [x] Added AI-generated prompt display to results page
  - [x] Fixed data loading from correct localStorage key (`lastGeneratedProject`)
  - [x] **FIXED DOWNLOAD BUTTON**: Implemented robust image download functionality with Firebase signed URL support
  - [x] **AUTO-SAVE PROJECTS**: Projects are now automatically saved when generation completes
  - [x] **SIMPLIFIED UI**: Removed manual save and navigation buttons for cleaner UX
  - [x] **IMPROVED LAYOUT**: Reorganized results and project details pages with buttons under project details for better flow
  - [x] Added proper error handling and fallback download methods
  - [x] Created `/api/get-signed-url` endpoint for fresh Firebase Storage URLs
- [x] **SORTED PROJECTS**: Projects now display from newest to oldest for better user experience
- [x] **PRODUCTION-READY POLISH**: Comprehensive UX/UI improvements and code cleanup:
  - [x] **DESIGN SYSTEM**: Created consistent design system with reusable classes
  - [x] **OPTIMIZED CSS**: Removed duplicated styles and created efficient utility classes
  - [x] **CLEANED CODE**: Removed unused files (performance.ts) and duplicated code
  - [x] **IMPROVED LAYOUTS**: Updated all pages with consistent spacing and modern design
  - [x] **BETTER LOADING STATES**: Added skeleton loading for projects grid
  - [x] **ENHANCED EMPTY STATES**: Improved empty state design with better UX
  - [x] **MODERN COMPONENTS**: Updated all components to use new design system
  - [x] **ACCESSIBILITY**: Added proper focus states and semantic HTML
  - [x] **RESPONSIVE DESIGN**: Ensured all components work perfectly on all devices
  - [x] **PERFORMANCE**: Optimized bundle size and removed unused dependencies
  - [x] **REVERTED LANDING BACKGROUND**: Changed landing page back to black background
  - [x] **ENHANCED FEATURES SECTION**: Added icons before subheadings with different colors
  - [x] **FIXED FEATURES SECTION**: Added missing CSS classes (badge-primary, icon-base) for proper styling
  - [x] **UPDATED HERO SLIDING PHOTOS**: Changed from 2 equal photos to 1.5 photos (1 full + 1 half)
  - [x] **MADE HERO IMAGES TALLER**: Changed aspect ratios to use more vertical space (2/3 and 1/2)
  - [x] **ADDED CODENIES CREDIT**: Added footer credit linking to Codenies Solutions website
  - [x] **ADDED ZARTA.IO LINK**: Added clickable Zarta.io URL in footer for SEO
  - [x] **CREATED GET-STARTED FLOW**: Added multi-step onboarding where step 2 navigates directly to signup
  - [x] **FIXED AUTH NAVIGATION LOOPS**: Updated back buttons in signup/login to go to home instead of creating loops
  - [x] **ENHANCED PROMPT GENERATION UX**: Added "Generating AI prompt..." indicator inside prompt box with spinner and dynamic placeholder
  - [x] **ADDED ASPECT RATIO ANALYSIS**: GPT now analyzes reference and garment image dimensions, shows detected ratios, AI recommendation, and dropdown for output selection
  - [x] **ENHANCED PROMPT SPECIFICITY**: Updated OpenAI prompts to generate extremely detailed, specific descriptions using standardized terminology for consistent, high-quality results
  - [x] **IMMEDIATE RESULTS NAVIGATION**: Generate button now navigates to results page immediately and shows loading state with "Generating..." indicator
  - [x] **FACE MODIFICATION ENHANCEMENT**: Added face modification instructions to prompts for slightly enhanced facial features and natural appearance
  - [x] Enhanced accessibility and touch interactions
- [x] **SEPARATED LOGIN AND SIGNUP FLOWS**: Created distinct user flows with:
  - [x] Dedicated signup page at `/signup` with email and Google authentication
  - [x] Clean login page at `/login` focused only on authentication
  - [x] New subscription page at `/subscribe` for new users to choose plans
  - [x] Proper navigation between login and signup pages
  - [x] Signup flow: Create account → Choose subscription → Dashboard
  - [x] Login flow: Sign in → Dashboard (or onboarding results if applicable)
  - [x] **STRIPE INTEGRATION**: Complete subscription flow with:
    - [x] Plan selection with same pricing as landing page
    - [x] Stripe checkout session creation
    - [x] Proper error handling and user feedback
    - [x] Environment variables configured for all plans
- [x] **COMPREHENSIVE CODEBASE CLEANUP**: Removed unnecessary files and optimized for efficiency:
  - [x] Removed duplicate `functions/` directory (Firebase deployment files)
  - [x] Deleted unused files: `test-imports.ts`, `vercel.json.backup`, `public/index.html`, `public/404.html`
  - [x] Removed empty directories: `public/images/examples`, `public/images/testimonials`, `public/images/features`, `public/favicon`, `public/icons`
  - [x] Deleted unused components: `before-after-slider.tsx`, `step-aesthetic.tsx`, `chart.tsx`
  - [x] Removed unused UI components: `calendar.tsx`, `pagination.tsx`, `menubar.tsx`, `breadcrumb.tsx`, `input-otp.tsx`, `resizable.tsx`, `drawer.tsx`
  - [x] Cleaned up package.json: removed unused dependencies (`react-compare-slider`, `recharts`)
  - [x] Removed Firebase deployment files: `deploy-firebase.js`, `firebase.json`
  - [x] Fixed build errors by clearing Next.js cache and reinstalling dependencies
  - [x] Verified successful build with optimized bundle sizes
- [x] Create .env.local file with your actual API keys
- [x] Test core flows: upload images, generate, auth, usage tracking, billing.
- [x] Review UI/UX: responsiveness, branding, polish.
- [x] **FIXED LANDING LAYOUT FOR BEST UX**: Improved responsive design across all screen sizes with:
  - [x] Enhanced hero section with better mobile layout and optimized sliding images
  - [x] Improved header component with better touch interactions and mobile menu
  - [x] Enhanced step-generate component with responsive grid layouts and better spacing
  - [x] Optimized main landing page with improved container spacing and responsive design
  - [x] Enhanced global CSS with responsive utilities, better typography scaling, and mobile-first design
  - [x] Added touch-friendly interactions and improved accessibility
  - [x] Better responsive breakpoints and spacing across all components
- [x] **UPDATED ONBOARDING TO 3 SEPARATE STEPS**: Modified onboarding flow for better UX with:
  - [x] Step 1: Upload Your Garment - dedicated step for garment photo upload
  - [x] Step 2: Choose Your Style - dedicated step for style reference upload
  - [x] Step 3: Generate Your AI Photoshoot - final generation step
  - [x] Updated progress indicator to show 3 distinct steps
  - [x] Improved step validation and auto-advance logic
  - [x] Better step titles and descriptions for clarity
  - [x] Updated component interfaces to match new flow
- [x] Deploy to Vercel using `pnpm run deploy`
- [x] Deploy to Firebase using `node deploy-firebase.js` (optional)
- [x] Final QA: test in production, check analytics/logging.
- [x] Launch and monitor feedback.
- [x] **FOCUS ON CONSISTENCY**: Applied unified design system across entire website with:
  - [x] Consistent typography using design system classes (heading-1, heading-2, heading-3, body-large, body-medium)
  - [x] Unified spacing with responsive utilities (space-responsive-*, p-responsive-*, m-responsive-*)
  - [x] Consistent button styling (btn-primary, btn-secondary) across all components
  - [x] Unified card design (card-zarta, card-zarta-light) for consistent visual hierarchy
  - [x] Standardized container sizes (container-sm, container-base, container-lg, container-xl)
  - [x] Consistent badge styling (badge-primary, badge-secondary, badge-success)
  - [x] Unified icon sizing (icon-sm, icon-base, icon-lg, icon-xl)
  - [x] Applied consistent design patterns to all upload steps and generate step
  - [x] Standardized text readability with larger, more accessible typography
  - [x] Unified responsive breakpoints and spacing throughout the application
- [x] **FIXED ONBOARDING FLOW**: Enhanced onboarding experience with:
  - [x] Improved file uploader with better error handling and validation
  - [x] Enhanced progress indicator with step indicators and better visual feedback
  - [x] Better validation logic with specific error messages for each step
  - [x] Improved error handling with animated error banners and clear messaging
  - [x] Enhanced mobile UX with better touch interactions and responsive design
  - [x] Better file validation with size and format checks
  - [x] Improved visual feedback with loading states and success indicators
  - [x] Enhanced accessibility with proper ARIA labels and keyboard navigation
  - [x] Better auto-advance logic with validation checks
  - [x] Improved step navigation with proper state management
- [x] **POLISHED LANDING PAGE**: Enhanced overall design and user experience with:
  - [x] Fixed header navigation centering and improved mobile responsiveness
  - [x] Enhanced hero section with better typography, spacing, and visual hierarchy
  - [x] Improved benefit badges with background styling and better icons
  - [x] Enhanced CTA buttons with better sizing and spacing
  - [x] Improved social proof section with better visual design
  - [x] Enhanced sliding image animations with smoother transitions
  - [x] Better responsive design across all screen sizes
  - [x] Improved accessibility and touch interactions
  - [x] Enhanced visual polish with better shadows, gradients, and spacing

- [x] **REAL AI IMAGE GENERATION PIPELINE**: Replaced mock generation with production-ready AI pipeline:
  - [x] Created Firebase Admin SDK configuration for server-side operations
  - [x] Implemented OpenAI gpt-4.1-mini integration for intelligent prompt generation
  - [x] Integrated Runway Gen-4 Image API for high-quality image synthesis
  - [x] Built `/api/generate` endpoint with complete authentication and credit management
  - [x] Created `/api/edit` endpoint for generating new versions of existing projects
  - [x] Updated Firestore schema to support version control and project metadata
  - [x] Implemented proper image upload to Firebase Storage with organized file structure
  - [x] Added comprehensive error handling and status tracking throughout the pipeline
  - [x] Created client-side API utilities for authenticated API calls
  - [x] Updated StepGenerate component to use real AI generation instead of mock data
  - [x] Added proper credit deduction and user balance management
  - [x] Implemented project versioning with metadata tracking
  - [x] Created environment template documentation for all required API keys
  - [x] Added proper TypeScript interfaces for all API requests and responses
  - [x] Implemented secure authentication using Firebase Auth tokens
  - [x] Added comprehensive logging and error reporting for debugging

## Today

- [x] Fix generate endpoint server error by unifying Firebase Admin Firestore usage (no mixed client/admin calls)
- [x] Improve error messages surfaced to client for prompt/image generation (propagate specific messages)
- [x] Make `lib/firebase` SSR-safe to prevent prerender failures by avoiding throws on the server
- [x] Remove unused `lib/api.ts` and cleanup unused imports in `components/generate/step-generate.tsx`
- [x] Verify production build succeeds without prerender errors
- [x] Integrate official `@runwayml/sdk` (use `RUNWAYML_API_SECRET`, default model `gen4_image`, convert URLs to data URIs)

- [x] Stop silent endless processing on generation
  - [x] Status endpoint now surfaces configuration/provider/storage errors instead of returning `processing` forever
  - [x] Client polling stops on error and shows the message, rather than timing out with "Generation still processing"

- [x] Implement 1-credit split billing: 0.5 OpenAI (prompt) + 0.5 Runway (generation)
  - [x] `/api/generate-prompt`: requires ≥0.5 credits and deducts 0.5 on success
  - [x] `/api/generate`: requires ≥1 credit and deducts 0.5 after Runway task starts
  - [x] `/api/edit`: requires ≥1 credit and deducts 1 credit on success

- [x] Switch prompt model to OpenAI gpt-4.1-mini
- [x] Wire results page navigation and state persistence after generation
- [x] Show garment, reference, prompt, and result in projects dashboard cards
- [x] Whitelist Firebase/Runway image domains in Next config so images render
- [x] Deploy latest changes to production
- [x] Pull Vercel production env and consolidate into single root `.env`

## Future Enhancements

- [ ] Add onboarding analytics to track user completion rates
- [ ] Implement A/B testing for different onboarding flows
- [ ] Add video tutorials for complex features
- [ ] Create interactive onboarding tour with tooltips
- [ ] Add onboarding progress persistence across sessions
- [ ] Implement smart defaults based on user behavior
- [ ] Add onboarding completion rewards or badges
- [ ] Create onboarding feedback collection system
- [ ] Add onboarding skip option for returning users
- [ ] Implement onboarding localization for international users
- [ ] Add image quality detection and suggestions
- [ ] Implement batch upload for multiple images
- [ ] Add image editing tools (crop, rotate, adjust)
- [ ] Create image preview gallery with zoom functionality
- [ ] Add drag-and-drop reordering for multiple images
- [ ] Implement image compression and optimization
- [ ] Add support for more image formats (HEIC, AVIF)
- [ ] Create image validation with AI-powered quality assessment
- [ ] Add image metadata extraction and display
- [ ] Implement image backup and sync across devices

- [x] Professional polish and cleanup
  - [x] Removed debug/test routes: `app/api/{simple-test,test-firestore,debug-firestore,firebase-test,test-generation}` and pages `app/{simple-test,test-firestore}`
  - [x] Deleted duplicate hooks: `components/ui/use-toast.ts`, `components/ui/use-mobile.tsx` (using `hooks/` versions)
  - [x] Removed unused stylesheet `styles/globals.css` (using `app/globals.css`)
  - [x] Renamed assets to professional naming and paths (`/images/feature-*.png`, `/brand-logos/*`), updated references
  - [x] Removed unused `public/icon/` assets
  - [x] Deleted unused component `components/generate/step-upload-combined.tsx`
  - [x] Made Firebase client init browser-only and lazy to prevent build-time failures
  - [x] Switched server routes to lazy Firebase Admin getters and server storage utility
  - [x] Made OpenAI and Stripe initialization lazy; prevented build-time env errors
  - [x] Forced dynamic rendering on auth-dependent pages: `/login`, `/signup`, `/subscribe`, `/generate`, `/generate/results`
  - [x] Verified production build succeeds
